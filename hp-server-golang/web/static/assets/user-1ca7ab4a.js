import{s as x}from"./http-b969c686.js";import{r as _,h as C,i as O,a as d,o as y,c as k,b as T,d as t,w as l,F as b,n as U,f as c,t as $,j as S}from"./index-e408c769.js";import"./userInfo-b8e9852a.js";function j(r){return x({url:"/client/user/list",method:"get",params:r})}function E(r){return x({url:"/client/user/removeUser",method:"get",params:r})}function K(r){return x({url:"/client/user/saveUser",method:"post",data:r})}const H={__name:"user",setup(r){const w=_(),m=_(!1),i=_(!1),a=C({username:"",password:"",desc:"",id:""}),s=C({total:0,current:1,pageSize:10}),u=()=>{m.value=!0,j({current:s.current,pageSize:s.pageSize}).then(e=>{m.value=!1,w.value=e.data.records,s.current=e.data.current,s.total=e.data.total})},h=e=>{E({id:e.id}).then(n=>{U.open({message:n.msg}),u()})},z=e=>{a.username=e.username,a.password=e.password,a.desc=e.desc,a.id=e.id,i.value=!0},D=[{title:"编号",dataIndex:"id",key:"id"},{title:"用户名",dataIndex:"username",key:"username"},{title:"密码",dataIndex:"password",key:"password"},{title:"备注",dataIndex:"desc",key:"desc"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action"}],I=e=>{s.current=e.current,s.pageSize=e.pageSize,s.total=e.total,u()},V=()=>{a.username="",a.password="",a.desc="",a.id=void 0,i.value=!0},N=()=>{K({...a}).then(e=>{U.open({message:e.msg}),u(),i.value=!1})};return O(()=>{u()}),(e,n)=>{const p=d("a-button"),B=d("a-table"),v=d("a-input"),f=d("a-form-item"),F=d("a-form"),L=d("a-modal");return y(),k(b,null,[T("div",null,[t(p,{type:"primary",style:{"margin-bottom":"10px"},onClick:V},{default:l(()=>[c("添加用户")]),_:1}),t(B,{loading:m.value,columns:D,rowKey:"id","data-source":w.value,locale:{emptyText:"暂无数据,添加一个试试看看"},pagination:s,onChange:I,scroll:{x:10}},{bodyCell:l(({column:o,record:g})=>[o.key==="createTime"?(y(),k(b,{key:0},[c($(new Date(g.createTime).toLocaleString()),1)],64)):S("",!0),o.key==="action"?(y(),k(b,{key:1},[t(p,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:M=>z(g)},{default:l(()=>[c("编辑")]),_:2},1032,["onClick"]),t(p,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:M=>h(g)},{default:l(()=>[c("删除")]),_:2},1032,["onClick"])],64)):S("",!0)]),_:1},8,["loading","data-source","pagination"])]),T("div",null,[t(L,{okText:"确定",cancelText:"取消",visible:i.value,"onUpdate:visible":n[3]||(n[3]=o=>i.value=o),title:"添加",onOk:N},{default:l(()=>[t(F,{model:a,ref:"formTable",layout:"vertical"},{default:l(()=>[t(f,{label:"用户名 "},{default:l(()=>[t(v,{value:a.username,"onUpdate:value":n[0]||(n[0]=o=>a.username=o),placeholder:"用户名"},null,8,["value"])]),_:1}),t(f,{label:"密码"},{default:l(()=>[t(v,{value:a.password,"onUpdate:value":n[1]||(n[1]=o=>a.password=o),placeholder:"密码"},null,8,["value"])]),_:1}),t(f,{label:"备注"},{default:l(()=>[t(v,{value:a.desc,"onUpdate:value":n[2]||(n[2]=o=>a.desc=o),placeholder:"备注"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}};export{H as default};
