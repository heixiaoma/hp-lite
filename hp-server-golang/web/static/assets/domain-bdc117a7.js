import{g as M,a as O,r as P,b as Y}from"./domain-4a80b0ce.js";import{_ as j,r as C,h as D,i as H,a as c,o as s,c as r,b as u,d as n,w as a,F as f,n as I,f as _,q as N,t as g,m,p as J,g as Q}from"./index-3e957d92.js";import"./http-447fb395.js";import"./userInfo-b8e9852a.js";const A=k=>(J("data-v-79610909"),k=k(),Q(),k),W={style:{"max-width":"80vw","white-space":"pre-line","max-height":"50vh",overflow:"scroll"}},X=A(()=>u("a",{href:"#"},"密钥",-1)),Z={style:{"max-width":"80vw","white-space":"pre-line","max-height":"50vh",overflow:"scroll"}},ee=A(()=>u("a",{href:"#"},"证书",-1)),te={key:0},ae={key:1},ne={__name:"domain",setup(k){const S=C(),h=C(!1),y=C(!1),b=C(!1),e=D({domain:"",desc:"",id:""}),d=D({total:0,current:1,pageSize:10}),p=()=>{h.value=!0,console.log(d),M({current:d.current,pageSize:d.pageSize}).then(t=>{h.value=!1,S.value=t.data.records,d.total=t.data.total})},B=t=>{P({id:t.id}).then(i=>{I.open({message:i.msg}),p()})},V=t=>{b.value=!1,e.desc=t.desc,e.id=t.id,e.domain=t.domain,e.certificateKey=t.certificateKey.trim(),e.certificateContent=t.certificateContent.trim(),y.value=!0},R=t=>{Y({id:t.id}).then(i=>{I.open({message:"任务已经提交，请稍等几分钟刷新列表"}),p()})},z=[{title:"编号",dataIndex:"id",key:"id"},{title:"域名",dataIndex:"domain",key:"domain"},{title:"备注",dataIndex:"desc",key:"desc"},{title:"证书密钥",dataIndex:"certificateKey",key:"certificateKey"},{title:"证书内容",dataIndex:"certificateContent",key:"certificateContent"},{title:"状态",dataIndex:"status",key:"status"},{title:"提示",dataIndex:"tips",key:"tips"},{title:"归属",dataIndex:"user",key:"user"},{title:"操作",key:"action"}],U=t=>{d.current=t.current,d.pageSize=t.pageSize,d.total=t.total,p()},F=()=>{b.value=!0,e.domain="",e.desc="",e.certificateKey="",e.certificateContent="",e.id=void 0,y.value=!0},L=()=>{O({...e}).then(t=>{I.open({message:t.msg}),p(),y.value=!1})};return H(()=>{p()}),(t,i)=>{const v=c("a-button"),w=c("a-popconfirm"),q=c("a-table"),T=c("a-input"),x=c("a-form-item"),K=c("a-textarea"),G=c("a-form"),$=c("a-modal");return s(),r(f,null,[u("div",null,[n(v,{type:"primary",style:{"margin-bottom":"10px"},onClick:F},{default:a(()=>[_("添加域名")]),_:1}),n(v,{type:"primary",style:{"margin-bottom":"10px","margin-left":"5px"},onClick:p},{default:a(()=>[_("刷新")]),_:1}),n(q,{loading:h.value,columns:z,rowKey:"id","data-source":S.value,locale:{emptyText:"暂无数据,添加一个试试看看"},pagination:d,onChange:U,scroll:{x:"max-content"}},{bodyCell:a(({column:o,record:l})=>[o.key==="certificateKey"?(s(),r(f,{key:0},[l.certificateKey?(s(),N(w,{key:0,okText:"好的",showCancel:!1},{icon:a(()=>[]),title:a(()=>[u("div",W,g(l.certificateKey),1)]),default:a(()=>[X]),_:2},1024)):m("",!0)],64)):m("",!0),o.key==="certificateContent"?(s(),r(f,{key:1},[l.certificateContent?(s(),N(w,{key:0,okText:"好的",showCancel:!1},{icon:a(()=>[]),title:a(()=>[u("div",Z,g(l.certificateContent),1)]),default:a(()=>[ee]),_:2},1024)):m("",!0)],64)):m("",!0),o.key==="createTime"?(s(),r(f,{key:2},[_(g(new Date(l.createTime).toLocaleString()),1)],64)):m("",!0),o.key==="user"?(s(),r(f,{key:3},[l.userId==-1?(s(),r("div",te," 官方用户 ")):(s(),r("div",ae,[u("div",null,"归属用户："+g(l.userDesc),1),u("div",null,"归属用户备注："+g(l.username),1)]))],64)):m("",!0),o.key==="action"?(s(),r(f,{key:4},[n(v,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:E=>R(l)},{default:a(()=>[_("获取SSL证书")]),_:2},1032,["onClick"]),n(v,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:E=>V(l)},{default:a(()=>[_("编辑")]),_:2},1032,["onClick"]),n(v,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:E=>B(l)},{default:a(()=>[_("删除")]),_:2},1032,["onClick"])],64)):m("",!0)]),_:1},8,["loading","data-source","pagination"])]),u("div",null,[n($,{okText:"确定",cancelText:"取消",visible:y.value,"onUpdate:visible":i[4]||(i[4]=o=>y.value=o),title:"信息",onOk:L},{default:a(()=>[n(G,{model:e,ref:"formTable",layout:"vertical"},{default:a(()=>[n(x,{label:"域名 "},{default:a(()=>[n(T,{disabled:!b.value,value:e.domain,"onUpdate:value":i[0]||(i[0]=o=>e.domain=o),placeholder:"域名"},null,8,["disabled","value"])]),_:1}),n(x,{label:"备注"},{default:a(()=>[n(T,{value:e.desc,"onUpdate:value":i[1]||(i[1]=o=>e.desc=o),placeholder:"备注"},null,8,["value"])]),_:1}),n(x,{label:"证书",name:"certificateKey",rules:[{required:!1,message:"必须填写证书.key文件"}]},{default:a(()=>[n(K,{rows:6,value:e.certificateKey,"onUpdate:value":i[2]||(i[2]=o=>e.certificateKey=o),placeholder:`-----BEGIN RSA PRIVATE KEY-----
***大概是这样的证书私钥***
-----END RSA PRIVATE KEY-----`},null,8,["value"])]),_:1},8,["rules"]),n(x,{label:"证书内容",name:"certificateContent",rules:[{required:!1,message:"映射描述必填"}]},{default:a(()=>[n(K,{rows:6,value:e.certificateContent,"onUpdate:value":i[3]||(i[3]=o=>e.certificateContent=o),placeholder:`-----BEGIN CERTIFICATE-----
***大概是这样的证书内容***
-----BEGIN CERTIFICATE-----`},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}},de=j(ne,[["__scopeId","data-v-79610909"]]);export{de as default};
