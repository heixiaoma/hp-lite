import{s as b}from"./http-447fb395.js";import{r as _,h as C,i as O,a as d,o as y,c as k,b as T,d as t,w as l,F as x,n as U,f as c,t as $,m as S}from"./index-3e957d92.js";import"./userInfo-b8e9852a.js";function E(r){return b({url:"/client/user/list",method:"get",params:r})}function K(r){return b({url:"/client/user/removeUser",method:"get",params:r})}function j(r){return b({url:"/client/user/saveUser",method:"post",data:r})}const H={__name:"user",setup(r){const w=_(),m=_(!1),i=_(!1),e=C({username:"",password:"",desc:"",id:""}),s=C({total:0,current:1,pageSize:10}),u=()=>{m.value=!0,E({current:s.current,pageSize:s.pageSize}).then(a=>{m.value=!1,w.value=a.data.records,s.total=a.data.total})},h=a=>{K({id:a.id}).then(o=>{U.open({message:o.msg}),u()})},z=a=>{e.username=a.username,e.password=a.password,e.desc=a.desc,e.id=a.id,i.value=!0},D=[{title:"编号",dataIndex:"id",key:"id"},{title:"用户名",dataIndex:"username",key:"username"},{title:"密码",dataIndex:"password",key:"password"},{title:"备注",dataIndex:"desc",key:"desc"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action"}],I=a=>{s.current=a.current,s.pageSize=a.pageSize,s.total=a.total,u()},V=()=>{e.username="",e.password="",e.desc="",e.id=void 0,i.value=!0},N=()=>{j({...e}).then(a=>{U.open({message:a.msg}),u(),i.value=!1})};return O(()=>{u()}),(a,o)=>{const p=d("a-button"),B=d("a-table"),v=d("a-input"),f=d("a-form-item"),F=d("a-form"),L=d("a-modal");return y(),k(x,null,[T("div",null,[t(p,{type:"primary",style:{"margin-bottom":"10px"},onClick:V},{default:l(()=>[c("添加用户")]),_:1}),t(B,{loading:m.value,columns:D,rowKey:"id","data-source":w.value,locale:{emptyText:"暂无数据,添加一个试试看看"},pagination:s,onChange:I,scroll:{x:"max-content"}},{bodyCell:l(({column:n,record:g})=>[n.key==="createTime"?(y(),k(x,{key:0},[c($(new Date(g.createTime).toLocaleString()),1)],64)):S("",!0),n.key==="action"?(y(),k(x,{key:1},[t(p,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:M=>z(g)},{default:l(()=>[c("编辑")]),_:2},1032,["onClick"]),t(p,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:M=>h(g)},{default:l(()=>[c("删除")]),_:2},1032,["onClick"])],64)):S("",!0)]),_:1},8,["loading","data-source","pagination"])]),T("div",null,[t(L,{okText:"确定",cancelText:"取消",visible:i.value,"onUpdate:visible":o[3]||(o[3]=n=>i.value=n),title:"添加",onOk:N},{default:l(()=>[t(F,{model:e,ref:"formTable",layout:"vertical"},{default:l(()=>[t(f,{label:"用户名 "},{default:l(()=>[t(v,{value:e.username,"onUpdate:value":o[0]||(o[0]=n=>e.username=n),placeholder:"用户名"},null,8,["value"])]),_:1}),t(f,{label:"密码"},{default:l(()=>[t(v,{value:e.password,"onUpdate:value":o[1]||(o[1]=n=>e.password=n),placeholder:"密码"},null,8,["value"])]),_:1}),t(f,{label:"备注"},{default:l(()=>[t(v,{value:e.desc,"onUpdate:value":o[2]||(o[2]=n=>e.desc=n),placeholder:"备注"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}};export{H as default};
