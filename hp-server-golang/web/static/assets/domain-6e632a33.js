import{g as M,a as O,r as P,b as Y}from"./domain-3b2205ca.js";import{_ as j,r as x,h as D,i as H,a as c,o as r,c as y,b as p,d as n,w as a,F as v,n as h,f as u,q as N,t as I,m,p as J,g as Q}from"./index-f3b1a191.js";import"./http-60097eee.js";import"./userInfo-b8e9852a.js";const A=g=>(J("data-v-71c7b25a"),g=g(),Q(),g),W={style:{"max-width":"80vw","white-space":"pre-line","max-height":"50vh",overflow:"scroll"}},X=A(()=>p("a",{href:"#"},"密钥",-1)),Z={style:{"max-width":"80vw","white-space":"pre-line","max-height":"50vh",overflow:"scroll"}},ee=A(()=>p("a",{href:"#"},"证书",-1)),te={__name:"domain",setup(g){const S=x(),C=x(!1),f=x(!1),b=x(!1),e=D({domain:"",desc:"",id:""}),l=D({total:0,current:1,pageSize:10}),d=()=>{C.value=!0,M({current:l.current,pageSize:l.pageSize}).then(t=>{C.value=!1,S.value=t.data.records,l.current=t.data.current,l.total=t.data.total})},B=t=>{P({id:t.id}).then(i=>{h.open({message:i.msg}),d()})},V=t=>{b.value=!1,e.desc=t.desc,e.id=t.id,e.domain=t.domain,e.certificateKey=t.certificateKey.trim(),e.certificateContent=t.certificateContent.trim(),f.value=!0},R=t=>{Y({id:t.id}).then(i=>{h.open({message:"任务已经提交，请稍等几分钟刷新列表"}),d()})},z=[{title:"编号",dataIndex:"id",key:"id"},{title:"域名",dataIndex:"domain",key:"domain"},{title:"备注",dataIndex:"desc",key:"desc"},{title:"证书密钥",dataIndex:"certificateKey",key:"certificateKey"},{title:"证书内容",dataIndex:"certificateContent",key:"certificateContent"},{title:"状态",dataIndex:"status",key:"status"},{title:"提示",dataIndex:"tips",key:"tips"},{title:"操作",key:"action"}],U=t=>{l.current=t.current,l.pageSize=t.pageSize,l.total=t.total,d()},F=()=>{b.value=!0,e.domain="",e.desc="",e.certificateKey="",e.certificateContent="",e.id=void 0,f.value=!0},L=()=>{O({...e}).then(t=>{h.open({message:t.msg}),d(),f.value=!1})};return H(()=>{d()}),(t,i)=>{const _=c("a-button"),w=c("a-popconfirm"),q=c("a-table"),T=c("a-input"),k=c("a-form-item"),K=c("a-textarea"),G=c("a-form"),$=c("a-modal");return r(),y(v,null,[p("div",null,[n(_,{type:"primary",style:{"margin-bottom":"10px"},onClick:F},{default:a(()=>[u("添加域名")]),_:1}),n(_,{type:"primary",style:{"margin-bottom":"10px","margin-left":"5px"},onClick:d},{default:a(()=>[u("刷新")]),_:1}),n(q,{loading:C.value,columns:z,rowKey:"id","data-source":S.value,locale:{emptyText:"暂无数据,添加一个试试看看"},pagination:l,onChange:U,scroll:{x:"max-content"}},{bodyCell:a(({column:o,record:s})=>[o.key==="certificateKey"?(r(),y(v,{key:0},[s.certificateKey?(r(),N(w,{key:0,okText:"好的",showCancel:!1},{icon:a(()=>[]),title:a(()=>[p("div",W,I(s.certificateKey),1)]),default:a(()=>[X]),_:2},1024)):m("",!0)],64)):m("",!0),o.key==="certificateContent"?(r(),y(v,{key:1},[s.certificateContent?(r(),N(w,{key:0,okText:"好的",showCancel:!1},{icon:a(()=>[]),title:a(()=>[p("div",Z,I(s.certificateContent),1)]),default:a(()=>[ee]),_:2},1024)):m("",!0)],64)):m("",!0),o.key==="createTime"?(r(),y(v,{key:2},[u(I(new Date(s.createTime).toLocaleString()),1)],64)):m("",!0),o.key==="action"?(r(),y(v,{key:3},[n(_,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:E=>R(s)},{default:a(()=>[u("获取SSL证书")]),_:2},1032,["onClick"]),n(_,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:E=>V(s)},{default:a(()=>[u("编辑")]),_:2},1032,["onClick"]),n(_,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:E=>B(s)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])],64)):m("",!0)]),_:1},8,["loading","data-source","pagination"])]),p("div",null,[n($,{okText:"确定",cancelText:"取消",visible:f.value,"onUpdate:visible":i[4]||(i[4]=o=>f.value=o),title:"信息",onOk:L},{default:a(()=>[n(G,{model:e,ref:"formTable",layout:"vertical"},{default:a(()=>[n(k,{label:"域名 "},{default:a(()=>[n(T,{disabled:!b.value,value:e.domain,"onUpdate:value":i[0]||(i[0]=o=>e.domain=o),placeholder:"域名"},null,8,["disabled","value"])]),_:1}),n(k,{label:"备注"},{default:a(()=>[n(T,{value:e.desc,"onUpdate:value":i[1]||(i[1]=o=>e.desc=o),placeholder:"备注"},null,8,["value"])]),_:1}),n(k,{label:"证书",name:"certificateKey",rules:[{required:!1,message:"必须填写证书.key文件"}]},{default:a(()=>[n(K,{rows:6,value:e.certificateKey,"onUpdate:value":i[2]||(i[2]=o=>e.certificateKey=o),placeholder:`-----BEGIN RSA PRIVATE KEY-----
***大概是这样的证书私钥***
-----END RSA PRIVATE KEY-----`},null,8,["value"])]),_:1},8,["rules"]),n(k,{label:"证书内容",name:"certificateContent",rules:[{required:!1,message:"映射描述必填"}]},{default:a(()=>[n(K,{rows:6,value:e.certificateContent,"onUpdate:value":i[3]||(i[3]=o=>e.certificateContent=o),placeholder:`-----BEGIN CERTIFICATE-----
***大概是这样的证书内容***
-----BEGIN CERTIFICATE-----`},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}},le=j(te,[["__scopeId","data-v-71c7b25a"]]);export{le as default};
