import{s as w}from"./http-72129eb7.js";import{u as _}from"./userInfo-b8e9852a.js";import{_ as x,u as b,r as y,h as I,i as S,a as s,o as U,c as B,b as p,d as o,w as n,f as N,p as V,g as k,n as q}from"./index-f9e88132.js";function C(a){return w({url:"/user/login",method:"post",data:a})}const D=a=>(V("data-v-1f457dcc"),a=a(),k(),a),T={class:"login-page"},E={class:"login-container"},F={class:"login-box"},H=D(()=>p("h1",{class:"logo"},"HP-Lite 内网穿透",-1)),L={__name:"login",setup(a){const u=b(),l=y(!1),t=I({email:"",password:""});S(()=>{let e=_.getUserInfo();e&&e.expTime>Date.parse(new Date)&&u.push("/client")});const d=()=>{console.log("---表单数据---",t),l.value=!0,C(t).then(e=>{l.value=!1,e.code===200&&(q.open({message:e.msg}),_.setUserInfo(e.data),u.push("/client"))}).catch(e=>{l.value=!1})};return(e,i)=>{const m=s("a-input"),c=s("a-form-item"),f=s("a-input-password"),g=s("a-button"),v=s("a-form"),h=s("a-spin");return U(),B("div",T,[p("div",E,[p("div",F,[H,o(h,{spinning:l.value},{default:n(()=>[o(v,{model:t,onFinish:d},{default:n(()=>[o(c,{label:"账号",name:"email",rules:[{required:!0,message:"账号必填"}]},{default:n(()=>[o(m,{value:t.email,"onUpdate:value":i[0]||(i[0]=r=>t.email=r),placeholder:"请输入账号"},null,8,["value"])]),_:1}),o(c,{label:"密码",name:"password",rules:[{required:!0,message:"密码必填"}]},{default:n(()=>[o(f,{value:t.password,"onUpdate:value":i[1]||(i[1]=r=>t.password=r),placeholder:"请输入密码"},null,8,["value"])]),_:1}),o(c,{style:{"text-align":"center"}},{default:n(()=>[o(g,{style:{width:"50%"},type:"primary","html-type":"submit"},{default:n(()=>[N("登录")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])])])}}},$=x(L,[["__scopeId","data-v-1f457dcc"]]);export{$ as default};
