import{g as M,a as j,r as A,b as E}from"./domain-6071fcd6.js";import{r as c,h as w,i as q,a as s,o as p,c as b,b as x,d as a,w as n,F as C,n as S,f as r,t as G,j as k,s as B}from"./index-e2ee6aad.js";import"./http-17b929e1.js";import"./userInfo-b8e9852a.js";const W={__name:"domain",setup(H){const T=c(),_=c(!1),u=c(!1),D=c(!1),v=c(!1),t=w({domain:"",desc:"",id:""}),i=w({total:0,current:1,pageSize:10}),d=()=>{_.value=!0,M({current:i.current,pageSize:i.pageSize}).then(e=>{_.value=!1,T.value=e.data.records,i.current=e.data.current,i.total=e.data.total})},L=e=>{A({id:e.id}).then(l=>{S.open({message:l.msg}),d()})},N=e=>{v.value=!1,t.desc=e.desc,t.id=e.id,u.value=!0},K=e=>{E({id:e.id}).then(l=>{S.open({message:"任务已经提交，请稍等几分钟刷新列表"}),d()})},O=[{title:"id",dataIndex:"id",key:"id"},{title:"域名",dataIndex:"domain",key:"domain"},{title:"备注",dataIndex:"desc",key:"desc"},{title:"证书密钥",dataIndex:"certificateKey",key:"certificateKey",ellipsis:!0},{title:"证书内容",dataIndex:"certificateContent",key:"certificateContent",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status"},{title:"提示",dataIndex:"tips",key:"tips"},{title:"操作",key:"action"}],$=e=>{i.current=e.current,i.pageSize=e.pageSize,i.total=e.total,d()},h=()=>{v.value=!0,t.domain="",t.desc="",t.id=void 0,u.value=!0},I=()=>{j({...t}).then(e=>{S.open({message:e.msg}),d(),u.value=!1})};return q(()=>{d()}),(e,l)=>{const m=s("a-button"),F=s("a-table"),f=s("a-input"),y=s("a-form-item"),U=s("a-form"),V=s("a-modal");return p(),b(C,null,[x("div",null,[a(m,{type:"primary",style:{"margin-bottom":"10px"},onClick:h},{default:n(()=>[r("添加域名")]),_:1}),a(m,{type:"primary",style:{"margin-bottom":"10px","margin-left":"5px"},onClick:d},{default:n(()=>[r("刷新")]),_:1}),a(F,{loading:_.value,columns:O,rowKey:"id","data-source":T.value,locale:{emptyText:"暂无数据,添加一个试试看看"},pagination:i,onChange:$,scroll:{x:10}},{bodyCell:n(({column:o,record:g})=>[o.key==="createTime"?(p(),b(C,{key:0},[r(G(new Date(g.createTime).toLocaleString()),1)],64)):k("",!0),o.key==="action"?(p(),b(C,{key:1},[a(m,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:z=>K(g)},{default:n(()=>[r("获取SSL证书")]),_:2},1032,["onClick"]),a(m,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:z=>N(g)},{default:n(()=>[r("编辑")]),_:2},1032,["onClick"]),a(m,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:z=>L(g)},{default:n(()=>[r("删除")]),_:2},1032,["onClick"])],64)):k("",!0)]),_:1},8,["loading","data-source","pagination"])]),x("div",null,[a(V,{okText:"确定",cancelText:"取消",visible:u.value,"onUpdate:visible":l[2]||(l[2]=o=>u.value=o),title:"信息",onOk:I},{default:n(()=>[a(U,{model:t,ref:"formTable",layout:"vertical"},{default:n(()=>[v.value?(p(),B(y,{key:0,label:"域名 "},{default:n(()=>[a(f,{value:t.domain,"onUpdate:value":l[0]||(l[0]=o=>t.domain=o),placeholder:"域名"},null,8,["value"])]),_:1})):k("",!0),a(y,{label:"备注"},{default:n(()=>[a(f,{value:t.desc,"onUpdate:value":l[1]||(l[1]=o=>t.desc=o),placeholder:"备注"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),x("div",null,[a(V,{okText:"确定",cancelText:"取消",visible:D.value,"onUpdate:visible":l[5]||(l[5]=o=>D.value=o),title:"信息",onOk:I},{default:n(()=>[a(U,{model:t,ref:"formTable",layout:"vertical"},{default:n(()=>[v.value?(p(),B(y,{key:0,label:"域名 "},{default:n(()=>[a(f,{value:t.domain,"onUpdate:value":l[3]||(l[3]=o=>t.domain=o),placeholder:"域名"},null,8,["value"])]),_:1})):k("",!0),a(y,{label:"备注"},{default:n(()=>[a(f,{value:t.desc,"onUpdate:value":l[4]||(l[4]=o=>t.desc=o),placeholder:"备注"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}};export{W as default};
