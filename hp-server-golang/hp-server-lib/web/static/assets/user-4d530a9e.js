import{s as x}from"./http-e687649d.js";import{r as y,g as C,h as $,o as _,c as k,a as T,b as n,w as l,F as b,n as U,e as d,f as m,t as h,i as S}from"./index-5c2911ba.js";import"./userInfo-b8e9852a.js";function E(r){return x({url:"/client/user/list",method:"get",params:r})}function K(r){return x({url:"/client/user/removeUser",method:"get",params:r})}function j(r){return x({url:"/client/user/saveUser",method:"post",data:r})}const H={__name:"user",setup(r){const w=y(),p=y(!1),i=y(!1),t=C({username:"",password:"",desc:"",id:""}),s=C({total:0,current:1,pageSize:10}),u=()=>{p.value=!0,E({current:s.current,pageSize:s.pageSize}).then(e=>{p.value=!1,w.value=e.data.records,s.current=e.data.current,s.total=e.data.total})},z=e=>{K({id:e.id}).then(a=>{U.open({message:a.msg}),u()})},D=e=>{t.username=e.username,t.password=e.password,t.desc=e.desc,t.id=e.id,i.value=!0},I=[{title:"编号",dataIndex:"id",key:"id"},{title:"用户名",dataIndex:"username",key:"username"},{title:"密码",dataIndex:"password",key:"password"},{title:"备注",dataIndex:"desc",key:"desc"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action"}],V=e=>{s.current=e.current,s.pageSize=e.pageSize,s.total=e.total,u()},N=()=>{t.username="",t.password="",t.desc="",t.id=void 0,i.value=!0},B=()=>{j({...t}).then(e=>{U.open({message:e.msg}),u(),i.value=!1})};return $(()=>{u()}),(e,a)=>{const c=d("a-button"),F=d("a-table"),v=d("a-input"),f=d("a-form-item"),L=d("a-form"),M=d("a-modal");return _(),k(b,null,[T("div",null,[n(c,{type:"primary",style:{"margin-bottom":"10px"},onClick:N},{default:l(()=>a[4]||(a[4]=[m("添加用户")])),_:1}),n(F,{loading:p.value,columns:I,rowKey:"id","data-source":w.value,locale:{emptyText:"暂无数据,添加一个试试看看"},pagination:s,onChange:V,scroll:{x:10}},{bodyCell:l(({column:o,record:g})=>[o.key==="createTime"?(_(),k(b,{key:0},[m(h(new Date(g.createTime).toLocaleString()),1)],64)):S("",!0),o.key==="action"?(_(),k(b,{key:1},[n(c,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:O=>D(g)},{default:l(()=>a[5]||(a[5]=[m("编辑")])),_:2},1032,["onClick"]),n(c,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:O=>z(g)},{default:l(()=>a[6]||(a[6]=[m("删除")])),_:2},1032,["onClick"])],64)):S("",!0)]),_:1},8,["loading","data-source","pagination"])]),T("div",null,[n(M,{okText:"确定",cancelText:"取消",visible:i.value,"onUpdate:visible":a[3]||(a[3]=o=>i.value=o),title:"添加",onOk:B},{default:l(()=>[n(L,{model:t,ref:"formTable",layout:"vertical"},{default:l(()=>[n(f,{label:"用户名 "},{default:l(()=>[n(v,{value:t.username,"onUpdate:value":a[0]||(a[0]=o=>t.username=o),placeholder:"用户名"},null,8,["value"])]),_:1}),n(f,{label:"密码"},{default:l(()=>[n(v,{value:t.password,"onUpdate:value":a[1]||(a[1]=o=>t.password=o),placeholder:"密码"},null,8,["value"])]),_:1}),n(f,{label:"备注"},{default:l(()=>[n(v,{value:t.desc,"onUpdate:value":a[2]||(a[2]=o=>t.desc=o),placeholder:"备注"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}};export{H as default};
