import{s as x}from"./http-0b189438.js";import{r as _,h as C,i as O,a as d,o as y,c as k,b as T,d as t,w as s,F as b,n as S,f as c,t as $,j as U}from"./index-9accdf37.js";import"./userInfo-b8e9852a.js";function j(r){return x({url:"/client/user/list",method:"get",params:r})}function E(r){return x({url:"/client/user/removeUser",method:"get",params:r})}function K(r){return x({url:"/client/user/saveUser",method:"post",data:r})}const H={__name:"user",setup(r){const w=_(),m=_(!1),i=_(!1),a=C({username:"",password:"",desc:"",id:""}),l=C({total:0,current:1,pageSize:10}),u=()=>{m.value=!0,j({page:l.current,pageSize:l.pageSize}).then(e=>{m.value=!1,w.value=e.data.records,l.current=e.data.current,l.pageSize=e.data.size,l.total=e.data.total})},h=e=>{E({id:e.id}).then(o=>{S.open({message:o.msg}),u()})},z=e=>{a.username=e.username,a.password=e.password,a.desc=e.desc,a.id=e.id,i.value=!0},D=[{title:"id",dataIndex:"id",key:"id"},{title:"用户名",dataIndex:"username",key:"username"},{title:"密码",dataIndex:"password",key:"password"},{title:"备注",dataIndex:"desc",key:"desc"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action"}],I=e=>{l.current=e.current,l.pageSize=e.pageSize,l.total=e.total,u()},V=()=>{a.username="",a.password="",a.desc="",a.id=void 0,i.value=!0},N=()=>{K({...a}).then(e=>{S.open({message:e.msg}),u(),i.value=!1})};return O(()=>{u()}),(e,o)=>{const p=d("a-button"),B=d("a-table"),v=d("a-input"),f=d("a-form-item"),F=d("a-form"),L=d("a-modal");return y(),k(b,null,[T("div",null,[t(p,{type:"primary",style:{"margin-bottom":"10px"},onClick:V},{default:s(()=>[c("添加用户")]),_:1}),t(B,{loading:m.value,columns:D,rowKey:"id","data-source":w.value,locale:{emptyText:"暂无公告,添加一个试试看看"},pagination:l,onChange:I,scroll:{x:10}},{bodyCell:s(({column:n,record:g})=>[n.key==="createTime"?(y(),k(b,{key:0},[c($(new Date(g.createTime).toLocaleString()),1)],64)):U("",!0),n.key==="action"?(y(),k(b,{key:1},[t(p,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:M=>z(g)},{default:s(()=>[c("编辑")]),_:2},1032,["onClick"]),t(p,{type:"primary",style:{"margin-bottom":"5px","margin-left":"5px"},onClick:M=>h(g)},{default:s(()=>[c("删除")]),_:2},1032,["onClick"])],64)):U("",!0)]),_:1},8,["loading","data-source","pagination"])]),T("div",null,[t(L,{okText:"确定",cancelText:"取消",visible:i.value,"onUpdate:visible":o[3]||(o[3]=n=>i.value=n),title:"添加",onOk:N},{default:s(()=>[t(F,{model:a,ref:"formTable",layout:"vertical"},{default:s(()=>[t(f,{label:"用户名 "},{default:s(()=>[t(v,{value:a.username,"onUpdate:value":o[0]||(o[0]=n=>a.username=n),placeholder:"用户名"},null,8,["value"])]),_:1}),t(f,{label:"密码"},{default:s(()=>[t(v,{value:a.password,"onUpdate:value":o[1]||(o[1]=n=>a.password=n),placeholder:"密码"},null,8,["value"])]),_:1}),t(f,{label:"备注"},{default:s(()=>[t(v,{value:a.desc,"onUpdate:value":o[2]||(o[2]=n=>a.desc=n),placeholder:"备注"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}};export{H as default};
