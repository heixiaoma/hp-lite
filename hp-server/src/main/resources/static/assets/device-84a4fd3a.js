import{_ as V,u as B,r as m,h as L,i as N,a as s,o as S,c as U,b as d,d as t,w as l,f as p,t as h,m as q}from"./index-1cd037b6.js";import{s as _}from"./http-f9a7bed9.js";import"./userInfo-b8e9852a.js";function z(c){return _({url:"/client/device/list",method:"get",params:c})}function O(c){return _({url:"/client/device/add",method:"post",data:c})}function R(c){return _({url:"/client/device/remove",method:"get",params:c})}const E={style:{"overflow-wrap":"break-word"}},H={class:"op-btn"},P={__name:"device",setup(c){B();const x=m(),f=m(),r=m(!1),u=m(!1),o=L({deviceId:"",desc:""}),I=()=>{u.value=!0},k=()=>{x.value.validate().then(n=>{O({...o}).then(a=>{o.deviceId="",o.desc="",v(),u.value=!1})})},v=()=>{r.value=!0,z().then(n=>{r.value=!1,f.value=n.data}).catch(n=>{r.value=!1})},D=()=>{let n="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){let i=Math.random()*16|0;return(a==="x"?i:i&3|8).toString(16)});o.deviceId=n};N(()=>{v()});const C=n=>{R({deviceId:n.deviceId}).then(a=>{v()})};return(n,a)=>{const i=s("a-button"),y=s("a-card"),w=s("a-list"),g=s("a-input"),b=s("a-form-item"),T=s("a-form"),M=s("a-modal");return S(),U("div",null,[d("div",null,[t(i,{type:"primary",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:I},{default:l(()=>[p("添加设备")]),_:1}),t(i,{type:"primary",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v},{default:l(()=>[p("刷新列表")]),_:1})]),t(w,{loading:r.value,locale:{emptyText:"暂无设备,请添加后在客户端"},"item-layout":"horizontal","data-source":f.value},{renderItem:l(({item:e})=>[d("div",{style:{padding:"30px"},class:q([e.online?"":"onRead"])},[t(y,{title:"备注："+e.desc,bordered:!1},{default:l(()=>[d("p",E,"设备ID："+h(e.deviceId),1),d("p",null,"是否在线："+h(e.online?"在线中":"未在线"),1),d("div",H,[t(i,{type:"primary",onClick:$=>C(e)},{default:l(()=>[p("删除")]),_:2},1032,["onClick"])])]),_:2},1032,["title"])],2)]),_:1},8,["loading","data-source"]),d("div",null,[t(M,{okText:"确定",cancelText:"取消",visible:u.value,"onUpdate:visible":a[2]||(a[2]=e=>u.value=e),title:"添加内网穿透配置",onOk:k},{default:l(()=>[t(T,{model:o,ref_key:"formTable",ref:x},{default:l(()=>[t(b,{label:"设备编号",name:"deviceId",rules:[{required:!0,message:"设备编号必填"}]},{default:l(()=>[t(g,{style:{width:"70%"},value:o.deviceId,"onUpdate:value":a[0]||(a[0]=e=>o.deviceId=e),placeholder:"设备ID：32位"},null,8,["value"]),d("span",{style:{"padding-left":"8px","user-select":"none"}},[d("a",{onClick:D},"自动生成")])]),_:1}),t(b,{label:"设备备注",name:"desc",rules:[{required:!0,message:"设备备注必填"}]},{default:l(()=>[t(g,{style:{width:"70%"},value:o.desc,"onUpdate:value":a[1]||(a[1]=e=>o.desc=e),placeholder:"备注如：nas中的HP"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])])}}},G=V(P,[["__scopeId","data-v-ccfca0c1"]]);export{G as default};
