package net.hserver.hplite.handler.proxy;

import cn.hserver.core.server.util.ExceptionUtil;
import cn.hserver.core.server.util.ReleaseUtil;
import io.netty.buffer.ByteBuf;
import io.netty.buffer.Unpooled;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.SimpleChannelInboundHandler;
import io.netty.handler.codec.http.*;

import java.nio.charset.StandardCharsets;

public class RouterHandler extends SimpleChannelInboundHandler<HttpRequest> {
    public static String dataHtml = "<!doctype html><html lang=\"en\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"><head><meta charset=\"utf-8\"><title>HP PRO | 404</title><style>html,body{background:#28254c;font-family:ubuntu}*{box-sizing:border-box}.box{width:350px;height:100%;max-height:600px;min-height:450px;background:#332f63;border-radius:20px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);padding:30px 50px}.box .box__ghost{padding:15px 25px 25px;position:absolute;left:50%;top:30%;transform:translate(-50%,-30%)}.box .box__ghost .symbol:nth-child(1){opacity:.2;animation:shine 4s ease-in-out 3s infinite}.box .box__ghost .symbol:nth-child(1):before,.box .box__ghost .symbol:nth-child(1):after{content:\"\";width:12px;height:4px;background:#fff;position:absolute;border-radius:5px;bottom:65px;left:0}.box .box__ghost .symbol:nth-child(1):before{transform:rotate(45deg)}.box .box__ghost .symbol:nth-child(1):after{transform:rotate(-45deg)}.box .box__ghost .symbol:nth-child(2){position:absolute;left:-5px;top:30px;height:18px;width:18px;border:4px solid;border-radius:50%;border-color:#fff;opacity:.2;animation:shine 4s ease-in-out 1.3s infinite}.box .box__ghost .symbol:nth-child(3){opacity:.2;animation:shine 3s ease-in-out .5s infinite}.box .box__ghost .symbol:nth-child(3):before,.box .box__ghost .symbol:nth-child(3):after{content:\"\";width:12px;height:4px;background:#fff;position:absolute;border-radius:5px;top:5px;left:40px}.box .box__ghost .symbol:nth-child(3):before{transform:rotate(90deg)}.box .box__ghost .symbol:nth-child(3):after{transform:rotate(180deg)}.box .box__ghost .symbol:nth-child(4){opacity:.2;animation:shine 6s ease-in-out 1.6s infinite}.box .box__ghost .symbol:nth-child(4):before,.box .box__ghost .symbol:nth-child(4):after{content:\"\";width:15px;height:4px;background:#fff;position:absolute;border-radius:5px;top:10px;right:30px}.box .box__ghost .symbol:nth-child(4):before{transform:rotate(45deg)}.box .box__ghost .symbol:nth-child(4):after{transform:rotate(-45deg)}.box .box__ghost .symbol:nth-child(5){position:absolute;right:5px;top:40px;height:12px;width:12px;border:3px solid;border-radius:50%;border-color:#fff;opacity:.2;animation:shine 1.7s ease-in-out 7s infinite}.box .box__ghost .symbol:nth-child(6){opacity:.2;animation:shine 2s ease-in-out 6s infinite}.box .box__ghost .symbol:nth-child(6):before,.box .box__ghost .symbol:nth-child(6):after{content:\"\";width:15px;height:4px;background:#fff;position:absolute;border-radius:5px;bottom:65px;right:-5px}.box .box__ghost .symbol:nth-child(6):before{transform:rotate(90deg)}.box .box__ghost .symbol:nth-child(6):after{transform:rotate(180deg)}.box .box__ghost .box__ghost-container{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE9GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDAgNzkuMTcxYzI3ZmFiLCAyMDIyLzA4LzE2LTIyOjM1OjQxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjQuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDgtMjlUMTg6MjE6MDYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA4LTMxVDExOjMxOjUxKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA4LTMxVDExOjMxOjUxKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2YjBkZWM4MS1lZTkwLTQwMWYtYTA2My1hOWQ3NTU1M2Q2NGIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NmIwZGVjODEtZWU5MC00MDFmLWEwNjMtYTlkNzU1NTNkNjRiIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NmIwZGVjODEtZWU5MC00MDFmLWEwNjMtYTlkNzU1NTNkNjRiIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2YjBkZWM4MS1lZTkwLTQwMWYtYTA2My1hOWQ3NTU1M2Q2NGIiIHN0RXZ0OndoZW49IjIwMjMtMDgtMjlUMTg6MjE6MDYrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNC4wIChNYWNpbnRvc2gpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PssdGbIAAC9tSURBVHic7b13eFzF9f//mtu2aFe925Ll3ruxsQFTjMGhhV4CIRSHEgyh5hcCCTVAQm8JJLQPJRBKqDZgDAZsjA3GGPciS67qdaWtt8z3j7uyZSzJkg0Efk/ez3O969XO3Jl53zln5sw5Z4WUkv/hxwPlv92A/2F3/I+QHxn+R8iPDP8j5EcGrfM/iR5V1FCdiZZ4n9TeHuy1H6OqWSTScjEr5mOKAIHBR6O1KEgrQmzdRWiLeqFXnY78w92IXlXfup8A7sxt/SZlzN8eunmujOtIRcHK9vPFgh28vbSSQIpg87xcsopUzKZdCxMpBQoOUiTrk7uqlFKAAIHc+blEIJBIQCTff7vvmiaoa3D4bFkCr0dhaF+NS29tZM6CWI/GqD06W0x1Qcj3DNWBFIfEO0fT6P0I4Qg0Twa+9HQURVP11AXLA6wt+N2U3JvJGnQLIg4jirlrx1zeXlqJlLQN6lDgBMAH1AJRIALUA1uAbcnPfhL44QgRgFQRwoPQBAgJWhijPB/vgVfjCJvQ5q/YMHcjLaF0ioctF96U9ZSVHR4tVD1k5uYS/jTEbf9ZA0A4InFMrkYV9+6aBiCERLZ/wgX1QCmwWQgWSFgEfP2D9buH+J4JUcCO4QgPQguC4SCdxFBFEWt12wFpI3qnkX7i+QCkOQehfPoMGz+vtDeKE0cZpauHjp913afZmZOoqyvj5OOPI2IlAJg22TMmfaB2r2zZ6z4qK3lNAnlGkqoyBJ8DbyF5A0h8L93fB3yHhEgQintJGxwFVIEIlnh9qnaQXbVhhpSVM8zNH4yo/qjm04yUyYd6KhvxelvBBHRQE1GKx2dQ3LuGlsodteHxx9Zmj5kCNFG95QWWV2zYebdjDvWeohdoJFYmED1fmvRLXmcLISuBt5E8Byz8bsZi3/HdrbL0JmwckB6EN73QUoxzad36vCq1ci3eNM/aPvdapfXjEZFl89g6PzJ1sRO9vfLJR+HWP4O+AajBaWicEa/P/zxhTt4YiGy4O3/IBKiuhYobGD5cY/qxvXfezralB1zJt58oAC4SggUI+Tlw8n7XuB/ofIbY3u7VIMBUYhA9UnijdbOsso3H2bGmwx1rq05TI8gEjpQoXg9Kyw5q19o0xf3oZctuSD226E3+s/JL58v7sPqXjLXXbnpXpEQQopHaTWXXik+ejuT0+fwmzh0DvgO4cNZXfDB7OwBvfBB7+7q4vE7PUUnU2Ai1Z6vCTnCghNeAxQLuBv7zXVTaE3ROSFOwezVIEDVDMWpPmaulrTgyEd3hLi1FcvkoVJAS3dNEy/LNVG4QqKk69rodbD168uMpPz9yXPM7O4jYa8/MyV6Kf2omSip4Is2s3PDZ2bHDB99UVB+9i61Pj+u/uvVo1RWILFqeWHD7VY0P3Phw5pVGgQamBCu5nJW4WiHsQEIi4xLL7tG4tBHzgYDfA8t6VHo/0CkhsvaYbhQXOI5EVnKwqm470jTDCEUBKcGxwbHcVwXU1k1UfNVEQ9iDniEROjRvbKpr7T8Aa1QR1SvXbWj85FPGFqqQFWT7V1Fihf2rIg3TWfPwfQegOVNKG8aSkZVJXX0DQOof/95y57uL4+umHeod7VNJLcpT/V5DeAwdIz9HzRtYrOVnpCvpIk/T9aCAmIRGBzvk4Dh0Z6s1XcJ04D7b5tpoTEpfNwXHvqJTQpoGrthrYSklyg4fRmLS75XMKJgWOBayjQgscEBPTxDdUEHlOrA9KnY8gScYoGTkxJuzW0248CqUo5ueW/DbivMr73/nIL/RQixnXEufX154TWtrKVpm4bScMWdQWqZivjS77fYxIHXR14k5i75OvI07vBqgJt8HUlOUrPwcJXVgiVY0ZYxn+JRxxvAJI4xhgUFGpqoBlTZWs4MUdEmOdMTVPp84JidTPbMhJL/5ToRjJ+iUEO+Xq/da2NYUHKVPgZSxYx1LQybCgONe0gFAKCo6Vez4upHGZg8iKFGxQBasfrkpZ1Frcw0nbdzC2IF9EmMvv+Hg1vKLfmlHm3zjDprxVmthXdXSh+/j2P4pZOVJWpfU09zU2Hb7BFANpAL+ZF/ahlYBIqGwEw6FHblhs/Xl7I9jrwCB3Eyl6KhDvAccN9136EnTfIcZw3Q/9Q5WleXu7jsYbdOSpPrFkMMmGsu/XmteHI3If5jW93Ns0Skhvqtyuy4pAW+A2BUjZiVyY6imAGm5f5BO8lWgpcZJbK1ixwobU9cR0kHX0/COL/rLwoX3EEgbCF94oeBKMoMpDDhm0nPCI4jXNhO1VTyqj0TMxo5b6HsqbhN3R96AS4Jgd1K05GXg7uSVmgZn2/NvRtY8/2bkpd6F2sBzT/Yfe8V5wbPzRntyqbMxK+1kTbvuJZAkLIGhw4QxnsfDupjU2OBc2INx7jY6JaT6D0d3XkpCRErseAWFSutFmh1A2okkEQ47zUFCw9Aa2L68gdpaHREAaceJagNC4w/2/uutG34Bxq9h3vO8fstVGIcez7H9R0K8BTMcwvZZrk5irxpZduNLCqADHiAAeLZXWJvueCR0x4NPtbx62a+Cx1xzfvDXueM9uWyySLQ4CLWtqEAAiQRoNqRkKxc8cFdW4WEnVf3M2lvLeohOCSmd7e+0kCIF3qBByZSKU6UnkS1sG+y22SHdrjsKWqqNVVnF9mVx4poXIR3CYZPefYJ/yO51kI19FWwtg3Q/dY1beOmd+bQE0jhgYB/ysgqQAZVWPY4jRXJI9gsOEE9eIVxy/EBmOCKr/vr30L1/e6blrdt/l37xb2elXWAUqFjrzV0aKfni2BKnzOKgY/wzln1cuODMc2uOWbPVatnfxrVBdGZ1nDitkwGQYCkwMT2PR08e+5mZxRRbpO0SV+6aFxSdlMwWyv/9GZ8+14yZ6sMT8OLr1Sdy0CXHHVNwREZ6Ymv6oUZ86ZTGT5aEPq+YePxmbUA80LydNI/CEdOOJdhXZ8Vr/2DowBB6v+ncMNvkjj9e+V31vQ0KkIJrXnGAyJRxnsMeujXz1vHHpgxldQIzLl1rQNuQSMCSaKM9xLdZpb1HbxtS1+r0aGHd2bh3Soi5ZGjHBRRBPCYx67TBSpNvnZKbCapn1xPc1nJV4E31UDavgm3rmskekkV67zQyeqfFUrJ1Ga+s9+nBjdBYxpt/jhDoP2X+0QdNP6KyWqU+nMBKRDEUA8VKwxxWRfbIYfz1o1Ye+NNve9LvnkDgLhCygEYg98m7s2+94PK006m0MOts1yi62yBJtJEGKz+JLRg3o2JqT8RXjwmpu/2uDj83hU4wFsGbOufh1j7Vs1SjGKF6QdUQIrkRFAKEgtRSUH0+vEYEoVtgtmK1hjBDIVCi+IrCrH3WYdHHqejeRgYcPu4PK3tPubOuMY6BhSNBqApKVNArK4hUE1z2h7tpavrOJERH0IBsXGEVvfD0wCVP/D33zzhglpkInV0KX0qwQRvjYdl7kXcnnlBxjN3NxVePCfn8yZkdVUOcFDK8jtE/+m6dVGVQ+jMRug+heUDRXSUsBCDBjiBkFDDBMd09trDBMvH3l7SusXj3YZVwMIAmTIRHJXNk3xQh7YjjJNslQKIQi8cZ3TubB+et4ZF3V3Wv1/uHIJABNEyf5D3t9f/L/3tKnuqxNiRAbzdTJAgH1Ale3niw4bGTrqy7tDuV95gQ/vWLjr4OuhfTrj0nVLv4OT0lCKoBuoEwvAhVB6EgpAlOFOwoYLsWQNHGk0TPEuhBWPjXBKvLfQTzPVixKAwa9t6kAROOE4mE3f6Mo63nHl1H+n0ccuuDbK+s6k6/9xcGkAs0DOqlTf1ybq9XUntpAWtdkpR2OkVRQBnl4YozKs94+NXWl/dWcY8Jse8/f88vOwp2SoAWe95iRVRPEqofRQXNq2L4FVQDkJJwK0jHcdWJkmy4ktQyCviHaWx/Pcb7LyiIAj+6EieRURianD6kYFjCiGCb7ElIEulpnP/GKzyzdeve+vxdQcUlJTSgQJvy9bzebwbyNZ+1cfeZIh3QMxRIUxg5cWvvVeXmjq4q7fERrqqu67giX+ZYwwxP8iqgaSZYkmgjVJfBjloFqUqGjRaofh3HEa6cFQIhJdIBf4mOWW6xbLaDmerFJ03iWl/GXlY8Y9ifnojw8d5HaPTev/JdwgaqgJzSSmvBxKO3n7FqYfEbWomumJtNRJIUoYBVb6Nlqcx9Ov/9wsO2jdiXm3VKyIrK+B6fWVIjdfuqM7J9NVQ46VTXKlTWCarqFGpDClsbNYIpcH2/KJkZDpFYcsWVfJC0VAXhk6z6T4IdzTr+XioWFv0L866vruj3+UtHXoQ2uOv9RnZ2Novefx+WLt2X/u4rJFAD5Kzdbr074+SKi+d+0PufepaG2WjvOiBTBfYGk4JD/MMfuirzqivub7i/pzfqVGTdWJC9x2e2I0jJSxujl6S/3Vha2duMa5iGgaKBpkMkJinKkFx2dgx/nkLcVFxRpQiQ4B9hUP9JjNmP2pi5AXwiQeZBU997aN7qn81bvAWzpAC8XS8ehdeL3LwZGhp62tfvAgJ3WVw/65TgXQ+/WPg7Z3Ucx2LnQyclaEEFka4waMKWjI3bzaaOKuqxDrlqN1sOeHF3T4sDOUy74Nz0luUfv9DY2HSMpjgIx8KORGl2gkwemcIFp9YS9RiuyFLcejy9NDQJc2+NUNaUgidoQWZm3enHzizcsLbCbNlRhmbZu9x3OoEVDLJ6yxYumzu3y+99j1CANCDx2t25b518WcYR9ooYsr2dzZJoIz0sebXl7QPPqzyho0p6rEPy2p1PObZCTcRBB8wML6M3bmjKPfbkYxfGa39fMfeji4PBQChtwLClrbHgFyP8c6ZLmThF2gYoSX3uEWhZCuufjLB5u4ZRYFPSq5gNxROPmvq7u80BKQZeb/cOGqTXy47amm5993uCA7QC+inX1VxcO8W/OLu/J8vcnNh1aqkJnLUmk85IPf60F0KTX/kg/Hl3K++UkKvarRFkaABrHzqU9/76Ag3bwkQGt6Kn9aHO2HhXSWHKXcbU09FOzaHfP+bTv3nLIXER3LlGklLiLTFoXW7y9TwHJduLR1WxBw66vNlQvv46Uc4ys5uttQEFdF1FUdzDsf8Skm4ZlJ56WdX1H8/v8w/Vq+AkdrXHdkBpldx5Sca9r3wQntLdijslxNP+BDfoMPbiX9J38qe8dfV6qtel0SfcTHOkmjRDw1kXZ/yv/kJObakufl1wrKMmPfokGNkqWJKvX47RLHykeKBgyODXrnz1o0dWrijr2TD4AxRnqFiWQ6Vs3ePPAV1jfFE2fTOCFGW5Hdhc20xFJM6OpjAba5qwv7vwiwgQ+GR57KnXH28886RZmUc4K+PuIpmk881Wi/6HpEyeONwz4ovV8W7tZjvfGLa3rtb2hdl/gfNuZn3jWmpOGkL4oOv5T9bbTK4LM7k8RkFVLfECOUE9rOFLXxCkUBGawD/Cy9bXIsx7AaxMB09a1rYT7368+JPyBjasKUVRO3Z8EUmXz1bLQ2tEYjR+wJD4x/zqsQY6Uvvje2Ux75JjSQ/6QVPBSD5rcdPVtJE4m2qa2NjYwur6FlbXNLFwUyUba5u7M06dQQFkekCZ2LCk3yKhCsVq3mVjlA7oQwwW/Dv0+tRLKnbzZtk/V1IBqBI2eRjcXzL4xUpW/stgdIPCqZMnE5zho9ljEFn84iEZzeUQzHD3HMU6iU0my962iPtVcnMyscbOmP5JncbYUaOZetBBHd5KCEnUMmiIp1AcaCAl5TNo8MCKEi59tplQZE/Dal7AS3peBtQ0E7ctZNLfQQjhnlJpCv0LMulfkscMj+4WagrzxFcbuGfectY37JN9zAG8Ta3Okof/2fivK+7IPUcst3YqeKEA5SaHHBs8aeQAo9fK0kSXm0XoLiHZCogsyEyKiYI0RsaraG1dxtylX2A6Khl6IWOV2FSjQMeRwt1zeBVWvhqhqkmQUqiiHHPu+WUDpqxfMv9djPkdPyFSQrTGJj3SzNSiUqb3XkVxShg1r4SWBg+dTeioaUNrFNNxXKNk24hJiQVYpo1MWNAa3blR9Xp0Zk4fx8ypIzn3yfd57utN3RqObyEGcNOTjff/5lcZZ2jpmm6HbNpaYMckaqbKmUcGzllZ2vCXvVXWKSEbl4EU7ozvlzBPTUmZfX68bMAp0ayUmF8OwpBBpJ5CXXg5hlRI9Th4snwHomtIJN4+BrWfxln9uU0sP0DJuHH/N2n2wmf61c/mDF3B6WBkE5akrDqBMSWHMWeY5GrlkMiARCGoGjh7blb3FVIIonETttXhG1DAmPxMnmOfCAHQm1qcZc+81Pz6zBtzT2dlbJcLoiKgzuaso4Ln3PDYfhASP8R9tW14f4SVHTj+ncFln50khhVPZsqBOeBpYYo5nQl2PoqaSVP9xhGxzDX5upaBt0BHNjgs+0+CZkNnRO/s9a+/+/F516ypo7NzSIFrXr1yOBx13AAIpEF9mvuX78A9sTMIRUAkTkN0v8g2AR58tfmFmRdnnq4aAttsFyJRadF3in/E9En+CR8siXRpYuiUkCMjyQYDzV/pjz10lvexnx1QS6+GAkPLbfLjo4neeVSFKwnFY6T5tSNSfQIMgZajseapCKUb44jhvZhw+i+nr1I/4a2SKKE9lLgkPSWI4sBh6Z9x2GV9ocGB6kSydT+doNRVmxIfrF0UKRt6aKAf28ydctOxQfWrHH2g/4R9JqR6t//ZxNdoJNY9Q3XW4Af8vuxLtzYEPaaiJULNjci4IDO7/hDd0PD3MWj5xmLpnAgRv2DihLGnpp9w8bYrT5jFlV005KtXr2F8SS5siYIpQEueqfy0EP3Xh+E3bzsm7SqBuUvfCaDBZsYBvsOu3UsFnRIybdqu930HNDKmZCgffnYaGz6d/+zwjxvW+xpHWUVZO5h8zlZaWzTirepBRmEQbMHSF1tpjNpo5xz9SHTYEa99+cyLKDio7eqXQJrfj9zewDkP38X00VsYf8PhYMdA+ckRsRNvLwy/f1uNdZWiK7uJLRpshg/zTSrM0dIqaq1O19qdEjJvXvv/hWFHOgPOf4mNS95cnG/0X5ze6ywyFqwmPBfo5R9lDMsp0IpUyt+Is2JFFL147PLxpfHLV36+gNKaMELZfanq96tkDjQ47c05mC31XHPaINc396c3K3bDNxvjX9VuStTm9PfkUL9rxySjEtHfMI6Y4D/4+XdDszsr38Wyd2S7961E1zeneZxH7z14jH8MgbRFZJ537frBixKfff4hBwntmMGjHaxNgs+eb6Imv7855cbMoya99xaTDAm9O6i+ES5/3tWGqgauFeSnTUYSdQtWRL88eZzvGOp3fehIUDXBpGHeSftEiLnxASAZKFlerkbn3/ChZ/Tq8aa/iMjSJePt4S9nZRRecnY/8yBaQ+UH7liT4KvXEtSl5JKlpR07uHpOLTNlpxEo170Aj7zjvlcRne5cf4pYsjq+5GRFOaYthHQnElCcpw3oqmznIuuqqwGQqFit5vCRfSLj+87wQnEV6kqo+eKV0wcu/9vZC8pW8NHEg/+kvJBtR2Nbcq1C42/nb6r8YMB5nVsMnwDuaff///9Q4WJNeXwTYQdFCOz2BtCIQ0m+3k/p4oShU0LWr60E3LDhFumtlUYWfda1oMgEdcsFlZq1rPi0WRS2FlC6cs2KtAFTTylrEYS+WU64qfM1/RPAr3vcRRdddeTHhO019hZCjrtSTLQnRNKvwOhv6MKPa5zcA50S8nKZe+YggITmr1yROuDcyjdSHjX0cLB6jW9FzvG9zplw6skM5mBKLz+T5kQNMhZDUySK3nG1+0MGjiTFq7KX86s2ZAMH4IarCaAF9wwjwq6w6QpoL+W/O5RuT2xuqrJa0wv1APF2hMTBl6FlD+ht5AMdmro7JWS3ExUrwo5Y7LkzWwvf9URSct/xGWvM0s3MBPxkYvgzseri7mB1MmJdkeE4EtPaaYAaAhwLDAN67Wxjuu57+q2qv4Zjzpsd1VHVEgVJnkDeKqT8pVdXfbQ9GBKwLBxH4iT/b0uZcGCllPIVhHikJW6GOxuLniKWkE3RuKxNVwns9gdLomao5GZo6Z2V7dK4mO7LZnD+KJaUf0y1vZ2RddvrBjdpdc8WFxI33Uhii2Zsx0R0EQq7t5lhO6ALioH7kfJkAiqk6tD+WHRYgO118UNsR3ZIyPR++T9D4WXN0ANaqg+aI9Q0ttYAKEIEs4M+QzFUtc3crxmagaKMp6FlPKZ1eVHQ9yvgw67Go7twHBkRQsRwhGsQbIMU4AgcKTuNF+ySkMF5B/DqzDl8vGEDa+01NJXNoUouQMRipKV6kxVkkZnmpXKLs1M5O+3q6I6Y+vVhOVOPPyZ3NhErQIkfa3MktGRp0/LGsF0PqFIi+FgPr9wa6TBs+bRhxQc+ePYRc1AVZNyy//jqZ3fNWbv10431LSFcb9SUkvSAnmLoHkNVfEKg9csIBqcN7HXwWeMHnIXj9Lr66PHzvtheN+2VNVs/2ktz9wopcXbUmpH8IV46ipIQQqR0VrZLQuJWhKpmGJI/iKHKIBqzTqRUtLL+hak0hRZxyy234BDBv66OkX0nECpvodlxdq50u0PG6D7+3v+4c9gnBFVoNPnTPaV3P/le9asVDYnKZG9UkhFRyWs3m0qGzzD+ddZhs0n10byltuGIx+ecvqyifgGQj+ubIYGab6oa23adFiDnUxV78quNz/59yboX3jlv+nOpfXIyXv7Vke8V3P5idlVLNLSXZncJCWyrNqPjvcruS8jke9UNHuoQXRIikTgSGiMhLBkvUNSU6kBqwLGNTLZu+Zqbb75553cvmKFS5NUpTg1yQCLGUrqnwOfcMPhVMnWoSXDa/7d61quLGh4DinCDatrFOKCQtKq2xzUHD5+lleRmUt3MtMdmX7SssmFBsnxT8pLsiq5q/+oBshaUV3006aE3z1r1u1PfUouyjbuOHHvnea8vuqwbTe8SQZ+qYrWF+rTBDe6SuwuR3dBl4oBwvBkEvxGIUiHVrYpjl4s4V8YTdXt896n3PuC+dz9g7rYarmuso4v4q504ZXLmpMIDMyYRtbnh3o0PvLqo4VF2DWYZsBk3gcxm3CQyIb61bTllSNF5aBovfb72za8qG17DddHZjLuCCuGusJqTdTYkP68FdiTvkb6uPvT+zbO/eAzT5pyx/S/K8Hk83Wh+p1AE9O9l+Ig4u8K02y4HHIdO0wh1Sci44iPO9xs8akurP6A5jlUc0Ll/fNERHcbXtcRNFlTVcE9TE91xYzt1SuavSNepWxGqu+ONykdxXb+24w5eHHdGtF0W33qyBmWn5g8Z238kAS+vr9/eZn2rpRsxcEmYuG6iPLui/A2zol6quenatH75B3ezfIfQNaEEvKrPPfwXu19S4MjOsxN1SoihedXTx111dyQOMrnblDhELDhx7G9u358Gg7s6HlToHYcm+HRlaBFuxp4YdOjD0CEsx5G3vfzpHbc89OYT88urvgJI1RXu/nUJ+el6d6uRABWhyPra+pY6Al5G5WcM7GF3doNpS02a0p+Mpdh1AdhgO7LDTSF0oUMMxZPpNwJZEYuk5JVIASEzTl5GUX5BWkl+ZfPmfY4J0BRBXpoeIObQErMrdjW3+yhraA396b2v7sD1kWp6ela/m445tfCQ3Ijz5i3PbXu4J3VZjmwRoOBIWhKmuvcSnaMkXy9IzdYLiH9LVXgUYnVWfMO2RG1nZTudIQk71toYr9muGyBVB6lKUCVxGSY14KF35qBh+9Noy5ZUNCTC+BQCXjWw9xIdQuKe/Jq6KjjvxII/5k7KnPbnZ7eOaY3tzm1QVzlyRAnThxVTmLKnl+SAzGBeTk56Fq1RVlQ1Vu5jewAoyTeKPdm6Rgx379F2GSr1DVZlTaPV6YPc6QxJ2PHotuYNm4YVDe7dmNjlxiGFjccHhVn9BlHOPq/ZJbC9wSw/wJYTJw8K7CGzdeD5m4aSFVAh7mDrCv/+pJan5ux2lhnDPdyUkwamjMSvqpSG2VQbX9D+Sz5d5fMrfs7w4X0gYRGqbWb0va+xuWnX5vzayUN/pRVmEi+tsL/YXvflvvYLoE+eUYxX2SnqdzVEYeMOcytdZLjrUqk3RKq26x6QigRFIlWJVB3QoH/+iLH702iA5z6u+5AGk8Lx6SVXzMg7u+3zggyDZU+O4/Rzi5l2WA7TjsrjqKNyefKuEax5ahwXzMjdLVYG4I7z+txMtgc2h+UbSxo/bvujqgjeOPsIho8owdpSg1nZQGpmkMWzTiDdawAwMje918WHj/odUvLq6i1vNkYT2/anX8NLvMMwFDdLzs4ZAuiCrdXmlq7KdknIqopFKxwV0NgpslAkYRP6F46atD+NBsTrixte2rKwvoJUjQf/MOiZ4UW+gQAf3z6UEQdnwbIm2B6FHVEoj0BpmKHDgjz552FsmTOFC490s008NqvfHw+ZnnsyquDB1yqfbmy1NrfdJMXQObJ/IdQ271yq2TXN5OVlMLVvPgf0zh7x2W+OW0pm0KCygavfW3oTPc0A+i1MHeGbSljung1CClAUVpTFNnRRtOuN4frKZV83xiSarmO2+UQJSWMsxMCicSOzU3vl1YV2VHdVx17QcvLdGy/9anz6m2Tq2ooHRq58cWHD5QMLvf+kNJx0dGjrUfK1wnV0KxgY4A+n9hpy+PDgdWf/sugCMnXWzKkuv/KZLb/HlXgmuC6b9dHYUTmeQAbucrrFEhCpaSy86fBR08YVZF5CUTZE4pz6zAe/rmmNrcKNLdyntH8ZATVlzGD/ATRau+2YhCagwWLRqsgXXZXv1LdXCIGuefKev3r1hrz04tTmSC2WohFXvDhCMqQwjVueuuTCtz9//Kl9aXgSKUDizAMzL3nxvpEPkWdATRwqYmUgFqOIHbgPTRrubLZB+oEgluxFQB1LsR90hWXza1fNuHrVebVhawXJUwOAoEen4YYzo1pGwEtzBNtxsB2JoamQlw66RkVZ5baLX/rklnc27HgB16zRuK8dOu7A4JFvPzv4A7ktvpuXpZKh0bQ1Xp99ypohtkPdPvn2mla8evmWTxee2ef8YypNLx4S9DE3oNsxgrFRjB918un7SUgEyHppccPTW85dWn3/NQOunDQpczKDAv2I2v0wk4uJ3QL2k6YsXXGDLqvjkbtf2fH87/5efg+ugk/BnQmA60q6pbF1RZ5gVEBVddVjqKqmYkbi5vr129fNWbvto1vf/+rZsGWXA5l82wOqh7jw6IxzUEVbMqRdyNCY/3bDEtthTzNH+951NUMAjh7/i+tu+80Lf63ZtonRrV+SajchpEQ3UtkWHMqou09MjYW27U8kvwbk4YqY1J8fnHXojPHphw3M95Tk+NSAaUmnKWwlQCiOlAkpiauqENtCZtXSssimOYvqPyuvii/HFTNt+XrbwxswtAGqouSXpKcYAY/u9eqap7yptamsLrQl+X0/rmWgmh7uhdrD51EIzR7RogXUgNOyK85NOBIxzM9ls0pv/Nub9X+G/fB+X1z6yfzapjATzfX4zXpCWjoSgWqbDPRHmTlqymWPLPx3x2kfugcL13yRBYg3F9a/++bC+jm4osODK4nNZO+S6YYQuEtHB3dG+HFNJnsGjYBoTVi1QOybqsROa2+y7zquRbguWXa/jvdPOyTtFK2/LyA3Rmm/LhABDWdTnDcWhubsrY69ZiVtbt6xdM3y/1uQE0ylRU0FIdzoJdXADIe4fvLxVxrqfmebtXGjXLfhDpgXd8Bs3EFvyxTXNogaLhEGrsFwOx2TAe6T34JLWAO7jnMbkvfbnvxsv30tbv5l3g2EbXbbfkigwOCd+Y0fVdSbX++tjm6liZ335QuvonsQIhlRm4ysrY80U9hnaN7Ph04+fl878S3E2EXMFmBr8trS7mr//x24ltyuguIcXFHWjKusG5JXU/LzfRZR7XHCgakT+h6WMVbuMJPi3r1E0qD43EdNb3Snnm4R8mnpl3O2VW6wMtOyk/kJhXtTRcGJtfL7w8+6e9+70iEs3Cc79q2rLd9Vgl2i50eBP5yVdxcxB5xkJpFkDhSRrRNeFY6+9Xnoje7U0x1CRNQyS/+y8OXH9bTsdrNEcWdJUzXjRh4y+JJJx523Xz36CeOsqelHTvp59jQ2x3YbUeEAOQa3v1D9RMKS3dr973WV1QZNUYdWXf/vb1L9Ab0+EnKJEQIHSXZaNk2xcGuvm04MJuzvOundjxtCQPM7o6uDBZ5cWZXYnZBMndbqRDT95yvG2I7cSLsZ3dm4dzfVuGo59tp/LJ3zip5VAMidukRRFOpDdWQXlAQeO/XKf+x7136aeOTiXrcFRwRyZUV8dzIsCb08PPV23cu2IzfQzbHu9gwB8Gj6sC1/eGlZTmqWpyZUh6IoCOGGh3k0jbSCfpx070WHv7Hqs4/3pXM/NRw3Ljjh7X+P/JJtcWTMaR/YiMg2sMKWVXDSivF1zdYeSZD3d4YAGHHLXHP9nH88pKRnoyd1iKvgIYqBZXp45bfPvZMeKOwyLUO2z+DRn41jbEFGD27/w+Cw4UHe++tQCjK7PnHMTlG11x8a/D4tNjJs72aOFEJAnsE19257MElGt48ve0JIAjCeXvr+X5atWliRVVCC7dgIRSA9ueiyhdDGf6K1zE55/6LL52LsmbwGwFAV7jxiJKPy0nj7rKncdOQPnGypC9x4bm/mPzOKow/P4vFZfRjS29upP/FHjwyZo2V7MuX2uOvQ197JqNjLpg8btz40u/ZO3M1td3NV9PjnKhyg/oKX774GIQkGgthGFlpkNf6tf8Vf9wqR5fcwMXvFIf8+fsLT3y5cFPRxydgSAobG4h0NOI7Dzb84jA9mzmD6oI6CSH4YTJ+YzpK/j+S2P7pH6VuXh0jzqzxzZV+KcvZ0QHn++r4PjpyWNV1ujIDaLn+zFIgUFTSVs+4svx7XLNOpy09H6CkhFpDyTcWml2569YHnU4pGoZm1eCufQZjNOJ4ipL8PsS2bOH2ket7fpo+6s33hdK/OsOwg20NRfJpKbSQOVQ0cOaYvc2cdz7szf8b5k4ZQEOw8Z3BX8BgKt11Ywup/TeCBWf0YWtSxP1owoHHg4AD3XNSHtU+MZu7Dw5l4YDqsboUmC1UXNEdsslK1PbJp//PqPjef/eveV7CqtV0yTJK5FyX08/PIPZtf+rI08iKuSafbswP27Rd2IoDv1rnPXfWzA0476MBiu290fSWOvwhwEIAtfCTqI1x6eP/fgx3/zQerbwbX8toYM/HqrkhVkh2KVjZiGBozxvVnxsQhtFQ2sLiqkc21zWxrjbJqRx0hy6GpNcKGmia3FQI0RaFvVgbZ6ZKjDjA4/YgcisZmQHOCYWPS+O2MPOZ/08zq8gi9cwyCAZVUQ2VIHx/BLB1yDQiZUJMARyIVsXOMBdAStXfzHf/n1SU3zvxtn5tYF3ZPA9vLM9OBoSmsfL9+4+VPbL8cV1T1+MfI9oWQNmnZeMLfrjh34zVXvJ+W29sfDtk7M5IKITAdoLqVS48cfhOKwm/eX3lzeXMEo4PcJkIRJByJqGlGCIVgipfpo/uDroOhQ9xys0xGE9SGIu57FFRFIzM9A3ptgl5lELJhbYs77ytjkKJx+PQcDtfafkJDgi2hxYa4DaXhpLSR7uB+a+Hj0QVlVe7B3D+vKblt5uV9bmRtGGkmTwPbvm9JRJEPp8a0p1+3/lxcs4zGPlgS9tUqGAPSahs3L/zZ449ctmjmlKdTEptojSvuQyPclYZpS6hq5tLDht6U4TX6Xz9/zS83NoQZkp3a8Rlp8vg5Fk24JAgFFAVVUxEoaLpGTmaaS0hbwmbTguYYWBGQCqiqOw6KgKgNFfYuZ9Q2SHZmSu0MqiIor0qQG1S5dWbR4zMvLrqIdWFk4lthepZE5BjgU/n5zFW/qQ5Zi3ETMu+Tf/D+/AZVM5D5+bayf1348uI7yC7AbwhXaInkclgRmI4kXtPCmZMHnrNk5hELAoZWUBmOY0nZ7YNr25FYUhIzLWLhaLsrRsy0sO0e6c2uIdyJVN1koqnkf/3EqI9mXlh0ERsiLhminVuPDSJNh6DOOb9edf07X4eexj3k2mdn7f39UbAmIPDU6tI///b1lfcrWQH8Hj1pfhYgXD3hAJGaELnpKQffftiwNYcWZ59dH4kTtewfX5yaA/GEQ1GOcfTRB2euySvyHi43ht0TwPYKxZYIvwr9/Fx9w/r7X/is8V4gnXanlfuCHu3UO4GebEj4pkl977n5hNGX0hijNWaiqGpSr7iXBPw+D+gaX2ype8Hn0a8bXphVmUg4SEXZ7bs7xZLS7r0QoKjtRJYCQkfP3IiaWuaKLCcpstqCFtq/tqFNZLWJ+KQOcVM6yVTL5g7DEJehCWTU2fOhsRxEhg7FPu69feNT1z69/Srcs5kmuukK2+MkmD0ghGRj0oHY7w8oueXO48ZcScIm3BJHUdVkMuUkKUKgqioej4FpO1HL4Q6hqH+VipL4bxOC5FdSynuEqmQjQFpyzwg9W0K2AQGNa27Z8Jf73qi6C1cXh+iBp8r3TQi4y7xMIHTqoLyLXjl90n3oGpHGCEJV2w2yS07b4Ev3XGUHQrlPKMpTCKXphyVEghAXILgKSdfJj20JRT4wBGfPWnXtvxY0/I1kfnjoPMSgI/wQhIBLSg4QGpkVmPbhuYc8lVOYkZ6oDmEhksSI3WdA8qDLXS4rTQjlZYTyHIqy8HsmZAhCHgviQtwfOO4cjnTNIwNSqC8N159947pr318Reh03qKgO99CsR/ihCAFXp+QCrdkefcSLpx94z5Hj+x1IY4RwJJEUYe2JUNrNmF2iDSG+QShzUZQPUZQFCCXSMSFGkpBN3SFkHDAR5Mm4P4e3d9gS0nXo5WPu21WfnHPTuutrI/ZqXCfvanoQPtEePyQh4K7ecnHPq4PXThl8yd1Hj7mOoB+zNoSJQKi76wux28zZ430dQvkGIVajqJtQlG9QqJW2L46T0mDkrjTVtI0gFR1H9YIMIihEUoygP26I9QEg+3S7Bw7urCjxQ8Tmlr+VP3Dzc9vuw9UTCu7Z/z6fx//QhLQhE/dJCo3MST3kkZ9PvGHq6L4TMW0SDWEsIRCK4oZU76bQRSfvlZ37G2n7EJqNlrU+ovjqTKGYABpSGIC+z965bVuaAg/4NebPq/n0d38vf2BpaXgBrm2qhf3wbGzDf4sQcDuRi2sDS//FmL4nXn3wsHPHDykaTsIm1hxBtomsjmfHHu8FGhIdT+GXiNTNEE8Fx2C/fB5k8p9cL6Rq7FjbsuXGp7Y++sz71f/G1RE+XBHVY/tUh7f7LxICrk9VFu5saQayZ04cdMot08fOLCzOK8FyoClM1JGI9jpiNz2TdKwQCtIOoKVvRcv7CswUd9e8L82VuDYuQ4FcD/hVdqwIbb7v9YrnH/lPxesJR25LtrkFdyX1nbgMwX+fkDb4cInxAs1eVelz1rgBMy6dMuzEAwb2Hk/AD60x7HCchKTDWSOEgrRS0XNWomauc2dHT5NkSlz9kKFDmg7NJl9+0/zl0/Nq3n1ydtXbCVuWk0y4j7uK6tGStltN+JEQ0gY/LjEG7tOXOXVA4UG/GDfw8GkDiw4aUJJfgt8HCQsicayEjRv7IpIzJIiWvgktdxkkUrt3R1WAT4VUDbwqtFqUlbZunv1F44fPzq+dt3Rty3LcA6U2IhqAMN+T79ePjRBwhUwK7gCk0OZFKOh91JA+E44cVHTAlD4FI8cW5w3zZ6X58fvc2eJISAg3HWD+QvDtgFgKoLhe8m3tNhTwJD9zgKhNtCrWtHRTeM0na0LLP1oZ+mb+103Lcb0kNdyHJIKrsL83ItrwYySkPXy4m6xUXH0TwV3fZ+anpvQdXpBVMrIwp8+QXjklJRmpBQXpgezclNw01YgHPFkrldTUsFdKZChihW1HJhxJoqrZbN5Rl6heUxGtKKuKbV6zLVqxojxSWhcyt+CaObTkfa3k/1txlfcP4g35YyekDRrubj8leem4ijSefG0bxKDfo6YIx5+ioInsDNNnObZsbE2EHSktR5KIJZxWXHEYZVd6DW/yNYE7CyK4+uE7U9bdxU+FkPZQ2fVjwkbytc3zHXYmqmiLrNpZpg1te3Qbl4AEu3yDTXrofPBd46dIyLchcAe8LTtQ+6sNbSS1vdrsCmn40Thmwz4Q8j/8d7C/J4b/w3eM/xHyI8P/CPmR4f8BeVwceGN3GgoAAAAASUVORK5CYII=);width:100px;height:100px;background-size:cover;position:relative;margin:0 auto;animation:upndown 3s ease-in-out infinite}.box .box__ghost .box__ghost-shadow{height:20px;box-shadow:0 50px 15px 5px #3B3769;border-radius:50%;margin:0 auto;animation:smallnbig 3s ease-in-out infinite}.box .box__description{position:absolute;bottom:30px;left:50%;transform:translateX(-50%)}.box .box__description .box__description-container{color:#fff;text-align:center;width:200px;font-size:16px;margin:0 auto}.box .box__description .box__description-container .box__description-title{font-size:24px;letter-spacing:.5px}.box .box__description .box__description-container .box__description-text{color:#8c8aa7;line-height:20px;margin-top:20px}.box .box__description .box__button{display:block;position:relative;background:#4e498a;border:1px solid transparent;border-radius:50px;height:50px;text-align:center;text-decoration:none;color:#fff;line-height:50px;font-size:18px;padding:0 70px;white-space:nowrap;margin-top:25px;transition:background .5s ease;overflow:hidden;-webkit-mask-image:-webkit-radial-gradient(white,black)}.box .box__description .box__button:before{content:\"\";position:absolute;width:20px;height:100px;background:#fff;bottom:-25px;left:0;border:2px solid #fff;transform:translateX(-50px)rotate(45deg);transition:transform .5s ease}.box .box__description .box__button:hover{background:0 0;border-color:#fff}.box .box__description .box__button:hover:before{transform:translateX(250px)rotate(45deg)}@keyframes upndown{0%{transform:translateY(5px)}50%{transform:translateY(15px)}100%{transform:translateY(5px)}}@keyframes smallnbig{0%{width:90px}50%{width:100px}100%{width:90px}}@keyframes shine{0%{opacity:.2}25%{opacity:.1}50%{opacity:.2}100%{opacity:.2}}</style></head><body><div class=\"box\"><div class=\"box__ghost\"><div class=\"symbol\"></div><div class=\"symbol\"></div><div class=\"symbol\"></div><div class=\"symbol\"></div><div class=\"symbol\"></div><div class=\"symbol\"></div><div class=\"box__ghost-container\"><div class=\"box__ghost-eyes\"><div class=\"box__eye-left\"></div><div class=\"box__eye-right\"></div></div><div class=\"box__ghost-bottom\"><div></div><div></div><div></div><div></div><div></div></div></div><div class=\"box__ghost-shadow\"></div></div><div class=\"box__description\"><div class=\"box__description-container\"><div class=\"box__description-title\">找不到服务</div><div class=\"box__description-text\">设备与服务器断开了链接</div></div><a href=\"https://gitee.com/HServer/hp-lite\" target=\"_blank\" class=\"box__button\">前往官网</a></div></div><script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>\n" +
            "<script>var pageX=$(document).width(),pageY=$(document).height(),mouseY=0,mouseX=0;$(document).mousemove(function(e){mouseY=e.pageY,yAxis=(pageY/2-mouseY)/pageY*300,mouseX=e.pageX/-pageX,xAxis=-mouseX*100-100,$(\".box__ghost-eyes\").css({transform:\"translate(\"+xAxis+\"%,-\"+yAxis+\"%)\"})})</script></body></html>";

    @Override
    protected void channelRead0(ChannelHandlerContext ctx, HttpRequest request) throws Exception {
        writeException(ctx, dataHtml);
    }

    public void channelReadComplete(ChannelHandlerContext ctx) throws Exception {
        ctx.flush();
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
        writeException(ctx, ExceptionUtil.getMessage(cause));
    }


    private static void writeException(ChannelHandlerContext ctx, String message) {
        ByteBuf byteBuf = Unpooled.wrappedBuffer(message.getBytes(StandardCharsets.UTF_8));
        FullHttpResponse response = new DefaultFullHttpResponse(
                HttpVersion.HTTP_1_1,
                HttpResponseStatus.OK,
                byteBuf
              );
        response.headers().set(HttpHeaderNames.CONTENT_TYPE, "text/html;charset=UTF-8");
        response.headers().set(HttpHeaderNames.CONTENT_LENGTH, response.content().readableBytes());
        ctx.writeAndFlush(response).addListener(future -> {
            ReleaseUtil.release(byteBuf);
            ctx.channel().close();
        });
    }

}
